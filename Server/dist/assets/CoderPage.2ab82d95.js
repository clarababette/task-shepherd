var te=Object.defineProperty;var $=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var M=(t,e,o)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,L=(t,e)=>{for(var o in e||(e={}))re.call(e,o)&&M(t,o,e[o]);if($)for(var o of $(e))oe.call(e,o)&&M(t,o,e[o]);return t};import{g as ne,a as se,s as ae,T as l,c as j,b as ie,_ as R,d as le,r as a,u as ce,e as de,f as ue,j as r,h as me,A as _,F as k,i as C,k as m,B as v,l as q,U as pe,m as fe}from"./index.e89e6340.js";import{u as xe,a as he,b as ge,c as B,i as N,r as G,T as W,C as b,I,B as T,d as be,e as ve,D as ke,f as z,L as Ce,g as ye,h as we}from"./TaskHeader.5c8c0751.js";function Fe(t){return ne("MuiLink",t)}const Le=se("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var Re=Le;const Te=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],E={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},_e=t=>E[t]||t,De=t=>{const{classes:e,component:o,focusVisible:n,underline:s}=t,c={root:["root",`underline${j(s)}`,o==="button"&&"button",n&&"focusVisible"]};return ue(c,Fe,e)},Se=ae(l,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[`underline${j(o.underline)}`],o.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>{const o=ie(t,`palette.${_e(e.color)}`)||e.color;return R({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&{textDecoration:"underline",textDecorationColor:o!=="inherit"?le(o,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Re.focusVisible}`]:{outline:"auto"}})}),Ue=a.exports.forwardRef(function(e,o){const n=xe(),s=ce({props:e,name:"MuiLink"}),{className:c,color:d="primary",component:x="a",onBlur:p,onFocus:h,TypographyClasses:i,underline:w="always",variant:u="inherit",sx:f}=s,F=de(s,Te),g=typeof f=="function"?f(n).color:f==null?void 0:f.color,{isFocusVisibleRef:U,onBlur:O,onFocus:Y,ref:J}=he(),[K,V]=a.exports.useState(!1),Q=ge(o,J),X=y=>{O(y),U.current===!1&&V(!1),p&&p(y)},Z=y=>{Y(y),U.current===!0&&V(!0),h&&h(y)},A=R({},s,{color:(typeof g=="function"?g(n):g)||d,component:x,focusVisible:K,underline:w,variant:u}),ee=De(A);return r(Se,R({color:d,className:me(ee.root,c),classes:i,component:x,onBlur:X,onFocus:Z,ref:Q,ownerState:A,variant:u,sx:[...e.color?[{color:E[d]||d}]:[],...Array.isArray(f)?f:[f]]},F))});var Ve=Ue,D={},Ae=N.exports;Object.defineProperty(D,"__esModule",{value:!0});var H=D.default=void 0,$e=Ae(B),Me=G,Ie=(0,$e.default)((0,Me.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");H=D.default=Ie;function ze({url:t,update:e}){return r(W,{size:"small",onChange:o=>{e(o.target.value,t.description)},required:!0,label:t.description,defaultValue:t.address})}var S={},je=N.exports;Object.defineProperty(S,"__esModule",{value:!0});var P=S.default=void 0,qe=je(B),Be=G,Ne=(0,qe.default)((0,Be.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");P=S.default=Ne;function Ge(){const t=_(),{focusTask:e,setUpdate:o,urlEdit:n,setUrlEdit:s}=a.exports.useContext(k),{colors:c,getStatusColor:d,btn:x}=a.exports.useContext(C),[p,h]=a.exports.useState(e.urls.map(u=>L({},u))),i=async()=>{p&&await t.post(`/task/${e.id}/url_update`,{urls:p}).then(u=>{o(!0),s(!1)})},w=(u,f)=>{h(p.map(F=>{const g=L({},F);return g.description==f&&(g.address=u),g}))};return e?m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"1rem",minWidth:"15rem",overflow:"scroll",justifyContent:n?"space-between":"flex-start",marginTop:"0.5rem"},children:[m(l,{variant:"h6",children:["Your Links",!n&&r(I,{sx:{color:d(e.status),marginLeft:"1rem"},size:"small",onClick:()=>s(!0),children:r(H,{})}),n&&r(I,{sx:{color:c.blue.light,marginLeft:"1rem"},size:"small",onClick:()=>{s(!1)},children:r(P,{})})]}),!n&&e.urls.map((u,f)=>r(T,{variant:"contained",disabled:!u.address,size:"small",sx:{},onClick:()=>{window.open(u.address)},children:u.description},f)),n&&e.urls.map(u=>r(ze,{update:w,url:u},u.description)),n&&r(T,{variant:x.variant,sx:{width:x.width},onClick:i,children:"Save"})]}):null}function We({feedback:t}){const{colors:e,getMsgColor:o}=a.exports.useContext(C),{first_name:n,comment:s,timestamp:c,mentor_id:d}=t;return m(v,{sx:{padding:"0.5rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",width:"100%",gridColumn:n?"1 / 3":"2 / 4",justifySelf:n?"start":"end",height:"fit-content",backgroundColor:n?o(d):e.grey.light},children:[n&&r(l,{variant:"subtitle2",className:"feedback-details  ",children:n}),r(l,{variant:"body2",className:"feedback-text",children:s}),r(l,{sx:{textAlign:"right"},variant:"caption",className:"feedback-details  ",children:c})]})}function Ee(){const{comments:t,viewAllFeedback:e,setViewAllFeedback:o}=a.exports.useContext(k);return m(b,{sx:{display:e?"grid":"none",gridTemplateRows:"auto 1fr",margin:"1rem",padding:"1rem",height:"auto",maxHeight:"500px",gridRow:"span 2"},children:[r(l,{variant:"h6",children:"Feedback History"}),r(v,{sx:{display:"grid",gridTemplateColumns:"3rem 1fr 3rem",rowGap:"1rem",padding:"0.5rem",height:"auto",overflow:"scroll",alignContent:"start"},children:t.map((n,s)=>r(We,{feedback:n},s))})]})}function He(){const{focusTaskID:t,setUpdate:e}=a.exports.useContext(k),{colors:o,btn:n}=a.exports.useContext(C),s=_(),[c,d]=a.exports.useState();a.exports.useEffect(()=>{d("")},[t]);const x=async()=>{await s.post(`/task/${t}/requestFeedback`,{comment:c}).then(p=>{e(!0),d("")})};return r(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",minWidth:"20rem",overflow:"scroll",marginTop:"0.5rem"},children:m(v,{component:"form",sx:{display:"flex",flexDirection:"column",rowGap:"1rem"},children:[r(l,{variant:"h6",children:"Request Feedback"}),r(W,{value:c,size:"small",multiline:!0,maxRows:4,minRows:4,className:"coder-comment",placeholder:"Add a message to the mentors",onChange:p=>d(p.target.value),sx:{backgroundColor:o.grey.light,borderRadius:1}}),r(T,{variant:n.variant,sx:{width:n.width},onClick:x,children:"Send"})]})})}function Pe(){const{latestFeedback:t,viewAllFeedback:e,setViewAllFeedback:o}=a.exports.useContext(k);if(!t)return null;const{first_name:n,comment:s,timestamp:c}=t;return m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",minWidth:"15rem",overflow:"scroll",marginTop:"0.5rem",gridRow:"2 / 3",gridColumn:"1 / 2"},children:[r(l,{variant:"h6",children:"Latest Feedback"}),m(l,{variant:"body2",sx:{color:"hsl(200, 18%, 46%)"},children:["Feedback given by ",n," \u2022 ",c]}),r(l,{variant:"body1",sx:{flexGrow:"1"},className:"feedback-text",children:s}),r(Ve,{href:"#",variant:"body1",sx:{alignSelf:"flex-end"},onClick:()=>{o(!e)},underline:"hover",children:"View all feedback"})]})}function Oe({description:t=void 0,info_urls:e=void 0}){const{colors:o}=a.exports.useContext(C);return m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"1rem",minWidth:"15rem",overflow:"scroll",marginTop:"0.5rem"},children:[r(l,{variant:"h6",children:"Info"}),!t&&r(l,{sx:{color:o.grey.mid},variant:"body1",children:"No additional information was provided for this task."}),t&&r(l,{variant:"body1",children:t}),r(v,{children:e&&e.map((n,s)=>r(be,{label:n.description,onClick:()=>{window.open(n.address)},sx:{width:"fit-content",marginLeft:"0.5em"}},s))})]})}function Ye(){const{focusTask:t,comments:e,latestFeedback:o}=a.exports.useContext(k),{colors:n}=a.exports.useContext(C);return t?r(q,{children:m(v,{sx:{backgroundColor:n.grey.light,margin:"0rem 0rem 0rem 240px",padding:"1rem 2rem"},children:[r(b,{children:r(ve,{name:t.name,status:t.status,timestamp:t.status_timestamp})}),m(v,{className:"task",sx:{gridAutoColumns:o?"1fr":"auto",height:"auto"},children:[r(Oe,{description:t.description,info_urls:t.info_urls}),t.required_urls&&r(Ge,{}),!t.required_urls&&m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",minWidth:"15rem",overflow:"scroll",marginTop:"0.5rem"},children:[r(l,{variant:"h6",children:"Your URLs"}),r(l,{sx:{color:n.grey.mid},variant:"body1",children:"You are not required to submit any URLs for this task."})]}),r(He,{id:t.id}),o&&r(Pe,{feedback:o}),e&&r(Ee,{})]})]})}):null}function Xe(){const{user:t}=a.exports.useContext(pe),{focusTaskID:e,setFocusTaskID:o}=a.exports.useContext(k),[n,s]=a.exports.useState(),{colors:c,getStatusColor:d}=a.exports.useContext(C),[x,p]=a.exports.useState(!1),h=240;return a.exports.useEffect(async()=>{await _().get(`/tasks/coder/${t.id}`).then(i=>{s(i.data),o(i.data[0].id)})},[]),!n||!e?null:m(q,{children:[m(ke,{sx:{width:h,flexShrink:0,"& .MuiDrawer-paper":{width:h,boxSizing:"border-box",backgroundColor:c.blue.dark}},variant:"permanent",anchor:"left",children:[r(fe,{}),r(z,{}),r(Ce,{children:n.map(i=>r(ye,{button:!0,sx:{backgroundColor:e==i.id?d(i.status):"initial","& p":{color:e==i.id?"black":"white",opacity:"0.4"}},onClick:()=>{o(i.id)},onMouseOut:()=>{p(!1)},onMouseOver:()=>{p(i.id)},children:r(we,{sx:{color:e==i.id?"black":"white"},primary:i.name,secondary:x==i.id||e==i.id?i.status:""})},i.id))}),r(z,{})]}),r(Ye,{})]})}export{Xe as default};
