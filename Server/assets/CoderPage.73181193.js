var Z=Object.defineProperty;var $=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var I=(t,e,o)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,L=(t,e)=>{for(var o in e||(e={}))ee.call(e,o)&&I(t,o,e[o]);if($)for(var o of $(e))te.call(e,o)&&I(t,o,e[o]);return t};import{g as re,a as oe,s as ne,T as l,c as j,b as se,_ as R,d as ae,r as a,u as ie,e as le,f as ce,j as r,h as de,A as _,F as v,i as k,k as m,B as x,l as ue,U as me}from"./index.93df71fb.js";import{u as pe,a as fe,b as he,c as q,i as z,r as B,T as N,C as b,I as M,B as T,d as xe,e as ge,L as be,f as ve,g as ke,D as Ce}from"./TaskHeader.d72b4cb3.js";function ye(t){return re("MuiLink",t)}const we=oe("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var Fe=we;const Le=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],G={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Re=t=>G[t]||t,Te=t=>{const{classes:e,component:o,focusVisible:n,underline:s}=t,c={root:["root",`underline${j(s)}`,o==="button"&&"button",n&&"focusVisible"]};return ce(c,ye,e)},_e=ne(l,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[`underline${j(o.underline)}`],o.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>{const o=se(t,`palette.${Re(e.color)}`)||e.color;return R({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&{textDecoration:"underline",textDecorationColor:o!=="inherit"?ae(o,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Fe.focusVisible}`]:{outline:"auto"}})}),De=a.exports.forwardRef(function(e,o){const n=pe(),s=ie({props:e,name:"MuiLink"}),{className:c,color:d="primary",component:h="a",onBlur:p,onFocus:i,TypographyClasses:y,underline:w="always",variant:u="inherit",sx:f}=s,F=le(s,Le),g=typeof f=="function"?f(n).color:f==null?void 0:f.color,{isFocusVisibleRef:V,onBlur:P,onFocus:H,ref:O}=fe(),[Y,A]=a.exports.useState(!1),J=he(o,O),K=C=>{P(C),V.current===!1&&A(!1),p&&p(C)},Q=C=>{H(C),V.current===!0&&A(!0),i&&i(C)},S=R({},s,{color:(typeof g=="function"?g(n):g)||d,component:h,focusVisible:Y,underline:w,variant:u}),X=Te(S);return r(_e,R({color:d,className:de(X.root,c),classes:y,component:h,onBlur:K,onFocus:Q,ref:J,ownerState:S,variant:u,sx:[...e.color?[{color:G[d]||d}]:[],...Array.isArray(f)?f:[f]]},F))});var Ue=De,D={},Ve=z.exports;Object.defineProperty(D,"__esModule",{value:!0});var E=D.default=void 0,Ae=Ve(q),Se=B,$e=(0,Ae.default)((0,Se.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");E=D.default=$e;function Ie({url:t,update:e}){return r(N,{size:"small",onChange:o=>{e(o.target.value,t.description)},required:!0,label:t.description,defaultValue:t.address})}var U={},Me=z.exports;Object.defineProperty(U,"__esModule",{value:!0});var W=U.default=void 0,je=Me(q),qe=B,ze=(0,je.default)((0,qe.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");W=U.default=ze;function Be(){const t=_(),{focusTask:e,setUpdate:o,urlEdit:n,setUrlEdit:s}=a.exports.useContext(v),{colors:c,getStatusColor:d,btn:h}=a.exports.useContext(k),[p,i]=a.exports.useState(e.urls.map(u=>L({},u))),y=async()=>{p&&await t.post(`/task/${e.id}/url_update`,{urls:p}).then(u=>{o(!0),s(!1)})},w=(u,f)=>{i(p.map(F=>{const g=L({},F);return g.description==f&&(g.address=u),g}))};return e?m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"1rem",minWidth:"15rem",overflow:"scroll",justifyContent:n?"space-between":"flex-start",marginTop:"0.5rem"},children:[m(l,{variant:"h6",children:["Your Links",!n&&r(M,{sx:{color:d(e.status),marginLeft:"1rem"},size:"small",onClick:()=>s(!0),children:r(E,{})}),n&&r(M,{sx:{color:c.blue.light,marginLeft:"1rem"},size:"small",onClick:()=>{s(!1)},children:r(W,{})})]}),!n&&e.urls.map((u,f)=>r(T,{variant:"contained",disabled:!u.address,size:"small",sx:{},onClick:()=>{window.open(u.address)},children:u.description},f)),n&&e.urls.map(u=>r(Ie,{update:w,url:u},u.description)),n&&r(T,{variant:h.variant,sx:{width:h.width},onClick:y,children:"Save"})]}):null}function Ne({feedback:t}){const{colors:e,getMsgColor:o}=a.exports.useContext(k),{first_name:n,comment:s,timestamp:c,mentor_id:d}=t;return m(x,{sx:{padding:"0.5rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",width:"100%",gridColumn:n?"1 / 3":"2 / 4",justifySelf:n?"start":"end",height:"fit-content",backgroundColor:n?o(d):e.grey.light},children:[n&&r(l,{variant:"subtitle2",className:"feedback-details  ",children:n}),r(l,{variant:"body2",className:"feedback-text",children:s}),r(l,{sx:{textAlign:"right"},variant:"caption",className:"feedback-details  ",children:c})]})}function Ge(){const{comments:t,viewAllFeedback:e,setViewAllFeedback:o}=a.exports.useContext(v);return m(b,{sx:{display:e?"grid":"none",gridTemplateRows:"auto 1fr",margin:"1rem",padding:"1rem",height:"auto",gridRow:"span 2"},children:[r(l,{variant:"h6",children:"Feedback History"}),r(x,{sx:{display:"grid",gridTemplateColumns:"3rem 1fr 3rem",rowGap:"1rem",padding:"0.5rem",height:"auto",overflow:"scroll",alignContent:"start"},children:t.map((n,s)=>r(Ne,{feedback:n},s))})]})}function Ee(){const{focusTaskID:t,setUpdate:e}=a.exports.useContext(v),{colors:o,btn:n}=a.exports.useContext(k),s=_(),[c,d]=a.exports.useState();a.exports.useEffect(()=>{d("")},[t]);const h=async()=>{await s.post(`/task/${t}/requestFeedback`,{comment:c}).then(p=>{e(!0),d("")})};return r(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",minWidth:"20rem",overflow:"scroll",marginTop:"0.5rem"},children:m(x,{component:"form",sx:{display:"flex",flexDirection:"column",rowGap:"1rem"},children:[r(l,{variant:"h6",children:"Request Feedback"}),r(N,{value:c,size:"small",multiline:!0,maxRows:4,minRows:4,className:"coder-comment",placeholder:"Add a message to the mentors",onChange:p=>d(p.target.value),sx:{backgroundColor:o.grey.light,borderRadius:1}}),r(T,{variant:n.variant,sx:{width:n.width},onClick:h,children:"Send"})]})})}function We(){const{latestFeedback:t,viewAllFeedback:e,setViewAllFeedback:o}=a.exports.useContext(v);if(!t)return null;const{first_name:n,comment:s,timestamp:c}=t;return m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",minWidth:"15rem",overflow:"scroll",marginTop:"0.5rem",gridRow:"2 / 3",gridColumn:"1 / 2"},children:[r(l,{variant:"h6",children:"Latest Feedback"}),m(l,{variant:"body2",sx:{color:"hsl(200, 18%, 46%)"},children:["Feedback given by ",n," \u2022 ",c]}),r(l,{variant:"body1",sx:{flexGrow:"1"},className:"feedback-text",children:s}),r(Ue,{href:"#",variant:"body1",sx:{alignSelf:"flex-end"},onClick:()=>{o(!e)},underline:"hover",children:"View all feedback"})]})}function Pe({description:t=void 0,info_urls:e=void 0}){const{colors:o}=a.exports.useContext(k);return m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"1rem",minWidth:"15rem",overflow:"scroll",marginTop:"0.5rem"},children:[r(l,{variant:"h6",children:"Info"}),!t&&r(l,{sx:{color:o.grey.mid},variant:"body1",children:"No additional information was provided for this task."}),t&&r(l,{variant:"body1",children:t}),r(x,{children:e&&e.map((n,s)=>r(xe,{label:n.description,onClick:()=>{window.open(n.address)},sx:{width:"fit-content",marginLeft:"0.5em"}},s))})]})}function He(){const{focusTask:t,comments:e,latestFeedback:o}=a.exports.useContext(v),{colors:n}=a.exports.useContext(k);return t?r(ue,{children:m(x,{sx:{backgroundColor:n.grey.light,width:"100%",padding:"1rem 2rem"},children:[r(b,{children:r(ge,{name:t.name,status:t.status,timestamp:t.status_timestamp})}),m(x,{className:"task",sx:{gridAutoColumns:o?"1fr":"auto",height:"auto"},children:[r(Pe,{description:t.description,info_urls:t.info_urls}),t.required_urls&&r(Be,{}),!t.required_urls&&m(b,{sx:{padding:"1rem",display:"flex",flexDirection:"column",rowGap:"0.25rem",minWidth:"15rem",overflow:"scroll",marginTop:"0.5rem"},children:[r(l,{variant:"h6",children:"Your URLs"}),r(l,{sx:{color:n.grey.mid},variant:"body1",children:"You are not required to submit any URLs for this task."})]}),r(Ee,{id:t.id}),o&&r(We,{feedback:o}),e&&r(Ge,{})]})]})}):null}function Ke(){const{user:t}=a.exports.useContext(me),{focusTaskID:e,setFocusTaskID:o}=a.exports.useContext(v),[n,s]=a.exports.useState(),{colors:c,getStatusColor:d}=a.exports.useContext(k),[h,p]=a.exports.useState(!1);return a.exports.useEffect(async()=>{await _().get(`/tasks/coder/${t.id}`).then(i=>{s(i.data),o(i.data[0].id)})},[]),!n||!e?null:m(x,{sx:{display:"flex",overflow:"hidden",height:"100%"},children:[m(x,{sx:{width:"15rem",backgroundColor:c.blue.dark,height:"auto"},children:[r(be,{children:n.map(i=>r(ve,{button:!0,sx:{backgroundColor:e==i.id?d(i.status):"initial","& p":{color:e==i.id?"black":"white",opacity:"0.4"}},onClick:()=>{o(i.id)},onMouseOut:()=>{p(!1)},onMouseOver:()=>{p(i.id)},children:r(ke,{sx:{color:e==i.id?"black":"white"},primary:i.name,secondary:h==i.id||e==i.id?i.status:""})},i.id))}),r(Ce,{})]}),r(He,{})]})}export{Ke as default};
